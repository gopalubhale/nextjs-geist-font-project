(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[979],{4507:(e,t,n)=>{Promise.resolve().then(n.bind(n,5761))},5761:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(5155),l=n(2115);function s(e){let{params:t}=e,{code:n}=t,[s,c]=(0,l.useState)([]),[a,i]=(0,l.useState)(0),u=(0,l.useRef)(null);if((0,l.useEffect)(()=>{!async function(){try{let e=await fetch("/api/link/".concat(n,"/content"));if(!e.ok)return void console.error("Link not found or expired");let t=await e.json();c(t.media)}catch(e){console.error("Error fetching media content",e)}}()},[n]),(0,l.useEffect)(()=>{if(0===s.length)return;if("video"===s[a].type){var e,t;null==(e=u.current)||e.load(),null==(t=u.current)||t.play()}let n=()=>{i(e=>(e+1)%s.length)},r=u.current;return r&&r.addEventListener("ended",n),()=>{r&&r.removeEventListener("ended",n)}},[a,s]),(0,l.useEffect)(()=>{let e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},[]),0===s.length)return(0,r.jsx)("main",{className:"min-h-screen flex items-center justify-center bg-black text-white",children:(0,r.jsx)("p",{children:"Loading content or link expired."})});let o=s[a];return(0,r.jsxs)("main",{className:"min-h-screen bg-black flex items-center justify-center",children:["image"===o.type&&(0,r.jsx)("img",{src:"/uploads/".concat(o.file_path),alt:"Media content",className:"max-w-full max-h-full object-contain"}),"video"===o.type&&(0,r.jsxs)("video",{ref:u,controls:!1,autoPlay:!0,muted:!0,className:"max-w-full max-h-full object-contain",children:[(0,r.jsx)("source",{src:"/uploads/".concat(o.file_path),type:"video/mp4"}),"Your browser does not support the video tag."]},o.id)]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(4507)),_N_E=e.O()}]);